<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="initial-scale=1,maximum-scale=1,user-scalable=no" />
    <title>mapa @ morava</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script src="https://unpkg.com/leaflet-ajax@2.1.0/dist/leaflet.ajax.js"></script>
	<script src="https://code.jquery.com/jquery-2.1.1.min.js"></script>
    <style>
      #map {position: absolute; top: 0; right: 0; bottom: 0; left: 0;}
    </style>
  </head>
  <body>
    <div id="map">
    </div>
    <p><a href="https://www.openstreetmap.org/copyright" target="_blank" rel="noopener">&copy; OpenStreetMap contributors</a></p>
    <script>
      const map = L.map('map', {maxZoom:21, minZoom:14}).setView([49.53, 17.26], 14);

      L.tileLayer('https://tile.openstreetmap.org/{z}/{x}/{y}.png', {
          maxZoom: 21,
          attribution: '&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'
      }).addTo(map);

      L.control.scale().addTo(map);

      L.tileLayer(`tiles/{z}/{x}/{y}.png`,{
          tileSize: 256,
          //zoomOffset: -1,
          maxZoom: 21,
          minZoom: 14,
          attribution: 'my',
          //crossOrigin: true
      }).addTo(map);

      var vrstvaFeatures = L.geoJSON(null, {
            style: {
                color: "blue",
                weight: 3
            },
            onEachFeature: function (feature, layer) {
				layer.bindPopup("ZastÃ¡vka: " + feature.properties.nazev);
            }
        });
        $.getJSON("https://gist.githubusercontent.com/VisegradMapping/fc92da083660038874b32b1742f63c79/raw/0094ac7e49e59cb98f206c253fe9d3272ce30e3d/data.geojson", function (data) {
            vrstvaFeatures.addData(data);
        });
		var overlayLayers = {
			"Krajina": vrstvaFeatures,
		};

		L.control.layers(null, overlayLayers).addTo(map);
		const legend = L.control({position: 'bottomright'});
	
	function getColor(d) {
		return d > 1000 ? '#800026' :
			d > 500  ? '#BD0026' :
			d > 200  ? '#E31A1C' :
			d > 100  ? '#FC4E2A' :
			d > 50   ? '#FD8D3C' :
			d > 20   ? '#FEB24C' :
			d > 10   ? '#FED976' : '#FFEDA0';
	}
	
	legend.onAdd = function (map) {

		const div = L.DomUtil.create('div', 'info legend');
		const grades = [0, 10, 20, 50, 100, 200, 500, 1000];
		const labels = [];
		let from, to;

		for (let i = 0; i < grades.length; i++) {
			from = grades[i];
			to = grades[i + 1];

			labels.push(`<i style="background:${getColor(from + 1)}"></i> ${from}${to ? `&ndash;${to}` : '+'}`);
		}

		div.innerHTML = labels.join('<br>');
		return div;
	};

	legend.addTo(map);
    </script>
  </body>
</html>
